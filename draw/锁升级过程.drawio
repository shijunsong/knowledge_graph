<mxfile host="Electron" agent="Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) draw.io/25.0.1 Chrome/128.0.6613.186 Electron/32.2.6 Safari/537.36" version="25.0.1">
  <diagram name="第 1 页" id="xElSgCnIUyM5hTjhRZZS">
    <mxGraphModel dx="1884" dy="1116" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="827" pageHeight="1169" math="0" shadow="0">
      <root>
        <mxCell id="0" />
        <mxCell id="1" parent="0" />
        <mxCell id="1LttPGEuxO-6-JKwhD3h-5" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" parent="1" source="1LttPGEuxO-6-JKwhD3h-3" target="1LttPGEuxO-6-JKwhD3h-4" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="1LttPGEuxO-6-JKwhD3h-6" value="标志位(01)" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];" parent="1LttPGEuxO-6-JKwhD3h-5" vertex="1" connectable="0">
          <mxGeometry x="-0.13" y="-1" relative="1" as="geometry">
            <mxPoint as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="1LttPGEuxO-6-JKwhD3h-80" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" parent="1" source="1LttPGEuxO-6-JKwhD3h-3" target="1LttPGEuxO-6-JKwhD3h-68" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="1LttPGEuxO-6-JKwhD3h-81" value="轻量级锁&lt;br&gt;00（标志位）" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];" parent="1LttPGEuxO-6-JKwhD3h-80" vertex="1" connectable="0">
          <mxGeometry x="-0.1069" y="2" relative="1" as="geometry">
            <mxPoint as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="1LttPGEuxO-6-JKwhD3h-107" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" parent="1" source="1LttPGEuxO-6-JKwhD3h-3" target="1LttPGEuxO-6-JKwhD3h-106" edge="1">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="395" y="150" />
              <mxPoint x="1970" y="150" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="1LttPGEuxO-6-JKwhD3h-110" value="重量级锁&lt;br&gt;10（标志位）" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];" parent="1LttPGEuxO-6-JKwhD3h-107" vertex="1" connectable="0">
          <mxGeometry x="-0.4066" y="4" relative="1" as="geometry">
            <mxPoint x="183" as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="1LttPGEuxO-6-JKwhD3h-3" value="目前锁状态" style="strokeWidth=2;html=1;shape=mxgraph.flowchart.decision;whiteSpace=wrap;" parent="1" vertex="1">
          <mxGeometry x="310" y="175" width="170" height="60" as="geometry" />
        </mxCell>
        <mxCell id="1LttPGEuxO-6-JKwhD3h-8" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" parent="1" source="1LttPGEuxO-6-JKwhD3h-4" target="1LttPGEuxO-6-JKwhD3h-7" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="1LttPGEuxO-6-JKwhD3h-14" value="1（是）" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];" parent="1LttPGEuxO-6-JKwhD3h-8" vertex="1" connectable="0">
          <mxGeometry x="-0.105" relative="1" as="geometry">
            <mxPoint as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="1LttPGEuxO-6-JKwhD3h-12" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0;entryY=0.5;entryDx=0;entryDy=0;entryPerimeter=0;" parent="1" source="1LttPGEuxO-6-JKwhD3h-4" target="1LttPGEuxO-6-JKwhD3h-31" edge="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="600" y="335" as="targetPoint" />
            <Array as="points" />
          </mxGeometry>
        </mxCell>
        <mxCell id="1LttPGEuxO-6-JKwhD3h-13" value="0（否）" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];" parent="1LttPGEuxO-6-JKwhD3h-12" vertex="1" connectable="0">
          <mxGeometry x="-0.024" y="2" relative="1" as="geometry">
            <mxPoint x="-9" y="2" as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="1LttPGEuxO-6-JKwhD3h-4" value="是否偏向锁？" style="strokeWidth=2;html=1;shape=mxgraph.flowchart.decision;whiteSpace=wrap;" parent="1" vertex="1">
          <mxGeometry x="310" y="305" width="170" height="60" as="geometry" />
        </mxCell>
        <mxCell id="1LttPGEuxO-6-JKwhD3h-17" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" parent="1" source="1LttPGEuxO-6-JKwhD3h-7" target="1LttPGEuxO-6-JKwhD3h-20" edge="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="395" y="585" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="1LttPGEuxO-6-JKwhD3h-21" value="是" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];" parent="1LttPGEuxO-6-JKwhD3h-17" vertex="1" connectable="0">
          <mxGeometry x="-0.1333" y="-1" relative="1" as="geometry">
            <mxPoint as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="1LttPGEuxO-6-JKwhD3h-22" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;exitPerimeter=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;entryPerimeter=0;" parent="1" source="1LttPGEuxO-6-JKwhD3h-7" target="1LttPGEuxO-6-JKwhD3h-31" edge="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="600" y="335" as="targetPoint" />
            <Array as="points">
              <mxPoint x="550" y="475" />
              <mxPoint x="550" y="335" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="1LttPGEuxO-6-JKwhD3h-23" value="不是" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];" parent="1LttPGEuxO-6-JKwhD3h-22" vertex="1" connectable="0">
          <mxGeometry x="-0.1161" y="-1" relative="1" as="geometry">
            <mxPoint x="-51" y="26" as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="1LttPGEuxO-6-JKwhD3h-7" value="当前对象MarkWord &lt;br&gt;ThreadID 是否相同" style="strokeWidth=2;html=1;shape=mxgraph.flowchart.decision;whiteSpace=wrap;" parent="1" vertex="1">
          <mxGeometry x="310" y="445" width="170" height="60" as="geometry" />
        </mxCell>
        <mxCell id="1LttPGEuxO-6-JKwhD3h-9" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;entryPerimeter=0;" parent="1" target="1LttPGEuxO-6-JKwhD3h-3" edge="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="240" y="205" as="sourcePoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="1LttPGEuxO-6-JKwhD3h-28" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=1;entryY=0.5;entryDx=0;entryDy=0;exitX=0.5;exitY=1;exitDx=0;exitDy=0;exitPerimeter=0;" parent="1" source="1LttPGEuxO-6-JKwhD3h-31" target="1LttPGEuxO-6-JKwhD3h-20" edge="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="650" y="355" as="sourcePoint" />
            <Array as="points">
              <mxPoint x="665" y="593" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="1LttPGEuxO-6-JKwhD3h-29" value="成功" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];" parent="1LttPGEuxO-6-JKwhD3h-28" vertex="1" connectable="0">
          <mxGeometry x="-0.2397" y="-1" relative="1" as="geometry">
            <mxPoint as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="1LttPGEuxO-6-JKwhD3h-18" value="线程访问同步代码块" style="strokeWidth=2;html=1;shape=mxgraph.flowchart.start_2;whiteSpace=wrap;fillColor=#33FF33;" parent="1" vertex="1">
          <mxGeometry x="170" y="170" width="70" height="70" as="geometry" />
        </mxCell>
        <mxCell id="1LttPGEuxO-6-JKwhD3h-20" value="获取偏向锁&lt;br&gt;ThreadId|epoch|age|(是否偏向锁)1|(锁标志位)01" style="rounded=1;whiteSpace=wrap;html=1;absoluteArcSize=1;arcSize=14;strokeWidth=2;fillColor=#009900;" parent="1" vertex="1">
          <mxGeometry x="255" y="565" width="280" height="55" as="geometry" />
        </mxCell>
        <mxCell id="1LttPGEuxO-6-JKwhD3h-25" value="执行同步代码块" style="strokeWidth=2;html=1;shape=mxgraph.flowchart.terminator;whiteSpace=wrap;fillColor=#FF3333;" parent="1" vertex="1">
          <mxGeometry x="307.5" y="655" width="175" height="35" as="geometry" />
        </mxCell>
        <mxCell id="1LttPGEuxO-6-JKwhD3h-27" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.5;entryY=0;entryDx=0;entryDy=0;entryPerimeter=0;" parent="1" source="1LttPGEuxO-6-JKwhD3h-20" target="1LttPGEuxO-6-JKwhD3h-25" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="1LttPGEuxO-6-JKwhD3h-33" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.5;entryY=0;entryDx=0;entryDy=0;exitX=1;exitY=0.5;exitDx=0;exitDy=0;exitPerimeter=0;" parent="1" source="1LttPGEuxO-6-JKwhD3h-31" target="1LttPGEuxO-6-JKwhD3h-32" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="1LttPGEuxO-6-JKwhD3h-34" value="失败" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];" parent="1LttPGEuxO-6-JKwhD3h-33" vertex="1" connectable="0">
          <mxGeometry x="-0.248" y="-1" relative="1" as="geometry">
            <mxPoint y="36" as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="1LttPGEuxO-6-JKwhD3h-31" value="CAS操作替换ThreadID" style="strokeWidth=2;html=1;shape=mxgraph.flowchart.decision;whiteSpace=wrap;fillColor=#FF8000;" parent="1" vertex="1">
          <mxGeometry x="580" y="300" width="170" height="70" as="geometry" />
        </mxCell>
        <mxCell id="1LttPGEuxO-6-JKwhD3h-45" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=1;entryY=0.5;entryDx=0;entryDy=0;" parent="1" source="1LttPGEuxO-6-JKwhD3h-40" target="1LttPGEuxO-6-JKwhD3h-44" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="1LttPGEuxO-6-JKwhD3h-46" value="已退出" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];" parent="1LttPGEuxO-6-JKwhD3h-45" vertex="1" connectable="0">
          <mxGeometry x="-0.1794" y="-1" relative="1" as="geometry">
            <mxPoint as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="1LttPGEuxO-6-JKwhD3h-53" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" parent="1" source="1LttPGEuxO-6-JKwhD3h-40" target="1LttPGEuxO-6-JKwhD3h-52" edge="1">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="980" y="720" />
              <mxPoint x="980" y="720" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="1LttPGEuxO-6-JKwhD3h-54" value="未退出" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];" parent="1LttPGEuxO-6-JKwhD3h-53" vertex="1" connectable="0">
          <mxGeometry x="0.463" y="3" relative="1" as="geometry">
            <mxPoint x="-20" as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="1LttPGEuxO-6-JKwhD3h-40" value="检查原持有偏向锁的线程&lt;br&gt;是否已经退出同步代码块" style="strokeWidth=2;html=1;shape=mxgraph.flowchart.decision;whiteSpace=wrap;" parent="1" vertex="1">
          <mxGeometry x="687" y="685" width="240" height="70" as="geometry" />
        </mxCell>
        <mxCell id="1LttPGEuxO-6-JKwhD3h-41" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;entryPerimeter=0;" parent="1" source="1LttPGEuxO-6-JKwhD3h-35" target="1LttPGEuxO-6-JKwhD3h-40" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="1LttPGEuxO-6-JKwhD3h-48" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.5;entryY=1;entryDx=0;entryDy=0;" parent="1" source="1LttPGEuxO-6-JKwhD3h-44" target="1LttPGEuxO-6-JKwhD3h-47" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="1LttPGEuxO-6-JKwhD3h-44" value="原持有偏向锁线程释放偏向锁&lt;br&gt;空|（是否偏向锁）0|（标志位）01" style="rounded=1;whiteSpace=wrap;html=1;absoluteArcSize=1;arcSize=14;strokeWidth=2;fillColor=#00FFFF;" parent="1" vertex="1">
          <mxGeometry x="80" y="697.5" width="200" height="45" as="geometry" />
        </mxCell>
        <mxCell id="1LttPGEuxO-6-JKwhD3h-47" value="唤醒原持有偏向锁的线程" style="rounded=1;whiteSpace=wrap;html=1;absoluteArcSize=1;arcSize=14;strokeWidth=2;fillColor=#7F00FF;" parent="1" vertex="1">
          <mxGeometry x="80" y="452.5" width="200" height="45" as="geometry" />
        </mxCell>
        <mxCell id="1LttPGEuxO-6-JKwhD3h-49" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0;entryY=0.5;entryDx=0;entryDy=0;entryPerimeter=0;" parent="1" source="1LttPGEuxO-6-JKwhD3h-47" target="1LttPGEuxO-6-JKwhD3h-7" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="1LttPGEuxO-6-JKwhD3h-51" value="未出现锁竞争" style="swimlane;whiteSpace=wrap;html=1;dashed=1;" parent="1" vertex="1">
          <mxGeometry x="40" y="50" width="920" height="1050" as="geometry" />
        </mxCell>
        <mxCell id="1LttPGEuxO-6-JKwhD3h-32" value="开始偏向锁撤销&lt;br&gt;（等待竞争出现才释放锁的机制）" style="rounded=1;whiteSpace=wrap;html=1;absoluteArcSize=1;arcSize=14;strokeWidth=2;fillColor=#33FF33;" parent="1LttPGEuxO-6-JKwhD3h-51" vertex="1">
          <mxGeometry x="672" y="352.5" width="190" height="40" as="geometry" />
        </mxCell>
        <mxCell id="1LttPGEuxO-6-JKwhD3h-35" value="暂停原持有锁的线程&lt;br&gt;（STW）" style="rounded=1;whiteSpace=wrap;html=1;absoluteArcSize=1;arcSize=14;strokeWidth=2;fillColor=#7F00FF;" parent="1LttPGEuxO-6-JKwhD3h-51" vertex="1">
          <mxGeometry x="672" y="472.5" width="190" height="40" as="geometry" />
        </mxCell>
        <mxCell id="1LttPGEuxO-6-JKwhD3h-36" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" parent="1LttPGEuxO-6-JKwhD3h-51" source="1LttPGEuxO-6-JKwhD3h-32" target="1LttPGEuxO-6-JKwhD3h-35" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="1LttPGEuxO-6-JKwhD3h-37" value="原持有偏向锁的线程到达安全点" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];" parent="1LttPGEuxO-6-JKwhD3h-36" vertex="1" connectable="0">
          <mxGeometry x="-0.1667" y="2" relative="1" as="geometry">
            <mxPoint as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="1LttPGEuxO-6-JKwhD3h-56" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" parent="1" source="1LttPGEuxO-6-JKwhD3h-52" target="1LttPGEuxO-6-JKwhD3h-55" edge="1">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="1100" y="335" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="1LttPGEuxO-6-JKwhD3h-52" value="升级为轻量级锁" style="rounded=1;whiteSpace=wrap;html=1;absoluteArcSize=1;arcSize=14;strokeWidth=2;fillColor=#33FF33;" parent="1" vertex="1">
          <mxGeometry x="1050" y="697.5" width="100" height="45" as="geometry" />
        </mxCell>
        <mxCell id="1LttPGEuxO-6-JKwhD3h-61" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" parent="1" source="1LttPGEuxO-6-JKwhD3h-55" target="1LttPGEuxO-6-JKwhD3h-57" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="1LttPGEuxO-6-JKwhD3h-55" value="原持有偏向锁的线程栈中分配锁记录" style="rounded=1;whiteSpace=wrap;html=1;absoluteArcSize=1;arcSize=14;strokeWidth=2;" parent="1" vertex="1">
          <mxGeometry x="1130" y="312.5" width="280" height="45" as="geometry" />
        </mxCell>
        <mxCell id="1LttPGEuxO-6-JKwhD3h-62" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" parent="1" source="1LttPGEuxO-6-JKwhD3h-57" target="1LttPGEuxO-6-JKwhD3h-58" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="1LttPGEuxO-6-JKwhD3h-57" value="拷贝对象头中的MarkWord到&lt;br&gt;原持有偏向锁线程的锁记录中" style="rounded=1;whiteSpace=wrap;html=1;absoluteArcSize=1;arcSize=14;strokeWidth=2;" parent="1" vertex="1">
          <mxGeometry x="1130" y="445" width="280" height="45" as="geometry" />
        </mxCell>
        <mxCell id="1LttPGEuxO-6-JKwhD3h-65" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" parent="1" source="1LttPGEuxO-6-JKwhD3h-58" target="1LttPGEuxO-6-JKwhD3h-59" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="1LttPGEuxO-6-JKwhD3h-67" value="原持有偏向锁线程" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];" parent="1LttPGEuxO-6-JKwhD3h-65" vertex="1" connectable="0">
          <mxGeometry x="-0.2436" relative="1" as="geometry">
            <mxPoint y="9" as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="1LttPGEuxO-6-JKwhD3h-71" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" parent="1" source="1LttPGEuxO-6-JKwhD3h-58" target="1LttPGEuxO-6-JKwhD3h-68" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="1LttPGEuxO-6-JKwhD3h-72" value="当前线程" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];" parent="1LttPGEuxO-6-JKwhD3h-71" vertex="1" connectable="0">
          <mxGeometry x="-0.0916" y="-1" relative="1" as="geometry">
            <mxPoint as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="1LttPGEuxO-6-JKwhD3h-58" value="原持有偏向锁的线程获取轻量级锁&lt;br&gt;指向原持有偏向锁线程锁记录的指针|（标志位）00" style="rounded=1;whiteSpace=wrap;html=1;absoluteArcSize=1;arcSize=14;strokeWidth=2;fillColor=#009900;" parent="1" vertex="1">
          <mxGeometry x="1130" y="570" width="280" height="45" as="geometry" />
        </mxCell>
        <mxCell id="1LttPGEuxO-6-JKwhD3h-66" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" parent="1" source="1LttPGEuxO-6-JKwhD3h-59" target="1LttPGEuxO-6-JKwhD3h-60" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="1LttPGEuxO-6-JKwhD3h-59" value="唤醒原持有偏向锁的线程" style="rounded=1;whiteSpace=wrap;html=1;absoluteArcSize=1;arcSize=14;strokeWidth=2;fillColor=#7F00FF;" parent="1" vertex="1">
          <mxGeometry x="1170" y="697.5" width="200" height="45" as="geometry" />
        </mxCell>
        <mxCell id="1LttPGEuxO-6-JKwhD3h-79" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0;entryY=0.5;entryDx=0;entryDy=0;exitX=0.5;exitY=1;exitDx=0;exitDy=0;" parent="1" source="1LttPGEuxO-6-JKwhD3h-60" target="1LttPGEuxO-6-JKwhD3h-78" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="1LttPGEuxO-6-JKwhD3h-60" value="从安全点继续执行" style="rounded=1;whiteSpace=wrap;html=1;absoluteArcSize=1;arcSize=14;strokeWidth=2;fillColor=#FF3333;" parent="1" vertex="1">
          <mxGeometry x="1170" y="800" width="200" height="45" as="geometry" />
        </mxCell>
        <mxCell id="1LttPGEuxO-6-JKwhD3h-73" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" parent="1" source="1LttPGEuxO-6-JKwhD3h-68" target="1LttPGEuxO-6-JKwhD3h-70" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="1LttPGEuxO-6-JKwhD3h-68" value="当前线程的栈中分配锁记录" style="rounded=1;whiteSpace=wrap;html=1;absoluteArcSize=1;arcSize=14;strokeWidth=2;" parent="1" vertex="1">
          <mxGeometry x="1490" y="312.5" width="280" height="45" as="geometry" />
        </mxCell>
        <mxCell id="1LttPGEuxO-6-JKwhD3h-70" value="拷贝对象头中的MarkWord到&lt;br&gt;当前线程的锁记录中" style="rounded=1;whiteSpace=wrap;html=1;absoluteArcSize=1;arcSize=14;strokeWidth=2;" parent="1" vertex="1">
          <mxGeometry x="1490" y="445" width="280" height="45" as="geometry" />
        </mxCell>
        <mxCell id="1LttPGEuxO-6-JKwhD3h-83" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" parent="1" source="1LttPGEuxO-6-JKwhD3h-76" target="1LttPGEuxO-6-JKwhD3h-77" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="1LttPGEuxO-6-JKwhD3h-76" value="获得轻量级锁&lt;br&gt;指向当前线程锁记录的指针| （标志位）00" style="rounded=1;whiteSpace=wrap;html=1;absoluteArcSize=1;arcSize=14;strokeWidth=2;fillColor=#009900;" parent="1" vertex="1">
          <mxGeometry x="1490" y="697.5" width="280" height="45" as="geometry" />
        </mxCell>
        <mxCell id="1LttPGEuxO-6-JKwhD3h-84" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" parent="1" source="1LttPGEuxO-6-JKwhD3h-77" target="1LttPGEuxO-6-JKwhD3h-78" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="1LttPGEuxO-6-JKwhD3h-77" value="执行同步代码块" style="rounded=1;whiteSpace=wrap;html=1;absoluteArcSize=1;arcSize=14;strokeWidth=2;fillColor=#FF3333;" parent="1" vertex="1">
          <mxGeometry x="1490" y="800" width="280" height="45" as="geometry" />
        </mxCell>
        <mxCell id="1LttPGEuxO-6-JKwhD3h-78" value="开始轻量级锁解锁" style="rounded=1;whiteSpace=wrap;html=1;absoluteArcSize=1;arcSize=14;strokeWidth=2;fillColor=#33FF33;" parent="1" vertex="1">
          <mxGeometry x="1490" y="900" width="280" height="45" as="geometry" />
        </mxCell>
        <mxCell id="1LttPGEuxO-6-JKwhD3h-88" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" parent="1" source="1LttPGEuxO-6-JKwhD3h-86" target="1LttPGEuxO-6-JKwhD3h-76" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="1LttPGEuxO-6-JKwhD3h-89" value="成功" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];" parent="1LttPGEuxO-6-JKwhD3h-88" vertex="1" connectable="0">
          <mxGeometry x="-0.2086" y="-1" relative="1" as="geometry">
            <mxPoint as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="1LttPGEuxO-6-JKwhD3h-91" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" parent="1" source="1LttPGEuxO-6-JKwhD3h-86" target="1LttPGEuxO-6-JKwhD3h-90" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="1LttPGEuxO-6-JKwhD3h-92" value="失败" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];" parent="1LttPGEuxO-6-JKwhD3h-91" vertex="1" connectable="0">
          <mxGeometry x="-0.1709" y="-3" relative="1" as="geometry">
            <mxPoint as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="1LttPGEuxO-6-JKwhD3h-86" value="CAS操作&lt;br&gt;将对象头MarkWord中锁记录指针&lt;br&gt;指向当前线程锁记录" style="strokeWidth=2;html=1;shape=mxgraph.flowchart.decision;whiteSpace=wrap;fillColor=#FF8000;" parent="1" vertex="1">
          <mxGeometry x="1490" y="557.5" width="280" height="70" as="geometry" />
        </mxCell>
        <mxCell id="1LttPGEuxO-6-JKwhD3h-87" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.5;entryY=0;entryDx=0;entryDy=0;entryPerimeter=0;" parent="1" source="1LttPGEuxO-6-JKwhD3h-70" target="1LttPGEuxO-6-JKwhD3h-86" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="1LttPGEuxO-6-JKwhD3h-101" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;" parent="1" source="1LttPGEuxO-6-JKwhD3h-90" target="1LttPGEuxO-6-JKwhD3h-98" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="1LttPGEuxO-6-JKwhD3h-125" value="自旋到达一定次数CAS操作依然没有成功" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];" parent="1LttPGEuxO-6-JKwhD3h-101" vertex="1" connectable="0">
          <mxGeometry x="0.2531" y="-1" relative="1" as="geometry">
            <mxPoint x="79" y="4" as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="1LttPGEuxO-6-JKwhD3h-90" value="自旋" style="verticalLabelPosition=bottom;verticalAlign=top;html=1;shape=hexagon;perimeter=hexagonPerimeter2;arcSize=6;size=0.27;fillColor=#3333FF;fontColor=#0000FF;fontStyle=1" parent="1" vertex="1">
          <mxGeometry x="1830" y="570" width="100" height="42.5" as="geometry" />
        </mxCell>
        <mxCell id="1LttPGEuxO-6-JKwhD3h-96" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.5;entryY=0;entryDx=0;entryDy=0;entryPerimeter=0;exitX=0.5;exitY=0;exitDx=0;exitDy=0;" parent="1" source="1LttPGEuxO-6-JKwhD3h-90" target="1LttPGEuxO-6-JKwhD3h-86" edge="1">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="1900" y="520" />
              <mxPoint x="1630" y="520" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="1LttPGEuxO-6-JKwhD3h-97" value="再尝试" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];" parent="1LttPGEuxO-6-JKwhD3h-96" vertex="1" connectable="0">
          <mxGeometry x="-0.086" y="-1" relative="1" as="geometry">
            <mxPoint as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="1LttPGEuxO-6-JKwhD3h-108" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.5;entryY=1;entryDx=0;entryDy=0;" parent="1" source="1LttPGEuxO-6-JKwhD3h-98" target="1LttPGEuxO-6-JKwhD3h-105" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="1LttPGEuxO-6-JKwhD3h-98" value="升级为重量级锁" style="rounded=1;whiteSpace=wrap;html=1;absoluteArcSize=1;arcSize=14;strokeWidth=2;fillColor=#33FF33;" parent="1" vertex="1">
          <mxGeometry x="1850" y="445" width="240" height="45" as="geometry" />
        </mxCell>
        <mxCell id="1LttPGEuxO-6-JKwhD3h-109" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.5;entryY=1;entryDx=0;entryDy=0;" parent="1" source="1LttPGEuxO-6-JKwhD3h-105" target="1LttPGEuxO-6-JKwhD3h-106" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="1LttPGEuxO-6-JKwhD3h-105" value="转变为重量级锁&lt;br&gt;指向重量级锁monitor的指针|（标志位）10" style="rounded=1;whiteSpace=wrap;html=1;absoluteArcSize=1;arcSize=14;strokeWidth=2;fillColor=#009900;" parent="1" vertex="1">
          <mxGeometry x="1845" y="312.5" width="250" height="45" as="geometry" />
        </mxCell>
        <mxCell id="1LttPGEuxO-6-JKwhD3h-106" value="mutex&lt;br&gt;挂起当前线程" style="rounded=1;whiteSpace=wrap;html=1;absoluteArcSize=1;arcSize=14;strokeWidth=2;fillColor=#00FFFF;" parent="1" vertex="1">
          <mxGeometry x="1845" y="190" width="250" height="45" as="geometry" />
        </mxCell>
        <mxCell id="1LttPGEuxO-6-JKwhD3h-114" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.5;entryY=1;entryDx=0;entryDy=0;entryPerimeter=0;" parent="1" source="1LttPGEuxO-6-JKwhD3h-111" target="1LttPGEuxO-6-JKwhD3h-124" edge="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="2065" y="625" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="1LttPGEuxO-6-JKwhD3h-115" value="成功" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];" parent="1LttPGEuxO-6-JKwhD3h-114" vertex="1" connectable="0">
          <mxGeometry x="0.2674" y="-1" relative="1" as="geometry">
            <mxPoint x="-1" y="10" as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="1LttPGEuxO-6-JKwhD3h-117" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" parent="1" source="1LttPGEuxO-6-JKwhD3h-111" target="1LttPGEuxO-6-JKwhD3h-116" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="1LttPGEuxO-6-JKwhD3h-118" value="失败" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];" parent="1LttPGEuxO-6-JKwhD3h-117" vertex="1" connectable="0">
          <mxGeometry x="-0.4097" relative="1" as="geometry">
            <mxPoint y="2" as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="1LttPGEuxO-6-JKwhD3h-111" value="CAS操作（1 &amp;amp; 2）&lt;br&gt;1.对象头中的MarkWord中锁记录是否&lt;br&gt;仍然指向当前线程锁记录&lt;br&gt;2. 拷贝再当前线程锁记录的MarkWord信息&lt;br&gt;是否与对象头中的MarkWord一致" style="strokeWidth=2;html=1;shape=mxgraph.flowchart.decision;whiteSpace=wrap;verticalAlign=top;spacingTop=16;fillColor=#FF8000;" parent="1" vertex="1">
          <mxGeometry x="1885" y="661.25" width="360" height="122.5" as="geometry" />
        </mxCell>
        <mxCell id="1LttPGEuxO-6-JKwhD3h-112" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0;entryY=0.5;entryDx=0;entryDy=0;entryPerimeter=0;" parent="1" source="1LttPGEuxO-6-JKwhD3h-78" target="1LttPGEuxO-6-JKwhD3h-111" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="1LttPGEuxO-6-JKwhD3h-120" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" parent="1" source="1LttPGEuxO-6-JKwhD3h-116" target="1LttPGEuxO-6-JKwhD3h-119" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="1LttPGEuxO-6-JKwhD3h-116" value="释放锁" style="rounded=1;whiteSpace=wrap;html=1;absoluteArcSize=1;arcSize=14;strokeWidth=2;fillColor=#00FFFF;" parent="1" vertex="1">
          <mxGeometry x="2025" y="820" width="80" height="45" as="geometry" />
        </mxCell>
        <mxCell id="1LttPGEuxO-6-JKwhD3h-121" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;entryPerimeter=0;" parent="1" source="1LttPGEuxO-6-JKwhD3h-119" target="1LttPGEuxO-6-JKwhD3h-123" edge="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="2065" y="970" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="1LttPGEuxO-6-JKwhD3h-119" value="唤起所有被挂起的线程" style="rounded=1;whiteSpace=wrap;html=1;absoluteArcSize=1;arcSize=14;strokeWidth=2;" parent="1" vertex="1">
          <mxGeometry x="1880" y="900" width="370" height="40" as="geometry" />
        </mxCell>
        <mxCell id="1LttPGEuxO-6-JKwhD3h-123" value="开始新一轮锁竞争" style="strokeWidth=2;html=1;shape=mxgraph.flowchart.terminator;whiteSpace=wrap;fillColor=#33FF33;" parent="1" vertex="1">
          <mxGeometry x="2000" y="980" width="130" height="40" as="geometry" />
        </mxCell>
        <mxCell id="1LttPGEuxO-6-JKwhD3h-124" value="释放锁" style="strokeWidth=2;html=1;shape=mxgraph.flowchart.terminator;whiteSpace=wrap;fillColor=#00FFFF;" parent="1" vertex="1">
          <mxGeometry x="2000" y="580" width="130" height="40" as="geometry" />
        </mxCell>
        <mxCell id="1LttPGEuxO-6-JKwhD3h-130" value="产生锁竞争" style="swimlane;whiteSpace=wrap;html=1;dashed=1;" parent="1" vertex="1">
          <mxGeometry x="1000" y="50" width="1300" height="1050" as="geometry" />
        </mxCell>
      </root>
    </mxGraphModel>
  </diagram>
</mxfile>
